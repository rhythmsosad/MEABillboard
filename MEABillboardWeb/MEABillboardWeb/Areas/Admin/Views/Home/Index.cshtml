@{
    //Layout = null;
}

@section Styles {
    <style type="text/css">
        .parallax-counter-v4 {
            z-index: 1;
            height: auto;
            padding: 30px 0;
            overflow: hidden;
            text-align: center;
            position: relative;
            background-image: url('@Url.Content("~/Images/Background/bg_01.jpg")');
        }

        .parallax-counter-v4 .counter, .parallax-counter-v4 h4 {
            background-color: rgba(230, 126, 34, 0.8);
            padding-left: 10px;
            padding-right: 10px;
        }

        .parallax-counter-v4 h4 {
            font-size: 24px;
        }
    </style>
}

<!--=== Parallax Counter v4 ===-->
<div class="parallax-counter-v4 parallaxBg">
    <div class="container content-sm">
        <div class="row">
            <div class="col-md-3 col-xs-6 md-margin-bottom-50">
                <i class="fa fa-building-o"></i>
                <span class="counter">265</span>
                <h4>จำนวนป้าย</h4>
            </div>
            <div class="col-md-3 col-xs-6 md-margin-bottom-50">
                <i class="fa fa-file-o"></i>
                <span class="counter">400</span>
                <h4>จำนวนสัญญา</h4>
            </div>
            <div class="col-md-3 col-xs-6">
                <i class="fa fa-user"></i>
                <span class="counter">100</span>
                <h4>จำนวนลูกค้า</h4>
            </div>
            <div class="col-md-3 col-xs-6">
                <i class="fa fa-clock-o"></i>
                <span class="counter">50</span>
                <h4>สัญญาที่กำลังจะหมดอายุ</h4>
            </div>
        </div><!--/end row-->
    </div><!--/end container-->
</div>
<!--=== End Parallax Counter v4 ===-->

<div class="container content-sm">
    <div class="row margin-bottom-20">
        <div class="col-md-6 col-sm-6">
            <div class="headline"><h2>จำนวนป้าย</h2></div>
            <div class="flot-chart">
                <div class="flot-chart-content" id="flot-bar-chart" style="min-height: 350px;"></div>
            </div>
        </div>
        <div class="col-md-6 col-sm-6">
            <div class="headline"><h2>จำนวนสื่อแยกตามประเภท</h2></div>
            <div class="flot-chart">
                <div class="flot-chart-pie-content" id="flot-pie-chart" style="min-height: 350px;"></div>
            </div>
        </div>
    </div>
    <div class="row margin-bottom-20">
        <div class="col-md-12 col-sm-12">
            <div class="headline"><h2>จำนวนคนที่ลงทะเบียน</h2></div>
            <div class="flot-chart">
                <div class="flot-chart-content" id="flot-line-chart" style="min-height: 350px;"></div>
            </div>
        </div>
    </div>
    <div class="row margin-bottom-20">
        <div class="col-md-6 col-sm-6">
            <div class="headline"><h2>รายชื่อพื้นที่ว่าง</h2></div>
            <div class="table-search-v1 panel panel-dark">
                <div class="table-responsive">
                    <table class="table table-bordered table-striped">
                        <thead>
                            <tr style="background-color: rgba(230, 126, 34, 0.8);">
                                <th style="font-weight: normal; width: 80px;">ลำดับที่</th>
                                <th style="font-weight: normal">ชื่อ</th>
                                <th style="font-weight: normal">คำอธิบาย</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td>1</td>
                                <td>
                                    <a href="#">พื้นที่ว่าง 1</a>
                                </td>
                                <td>
                                    BTS เพลินจิต
                                </td>
                            </tr>
                            <tr>
                                <td>2</td>
                                <td>
                                    <a href="#">พื้นที่ว่าง 2</a>
                                </td>
                                <td>
                                    BTS เพลินจิต
                                </td>
                            </tr>
                            <tr>
                                <td>3</td>
                                <td>
                                    <a href="#">พื้นที่ว่าง 3</a>
                                </td>
                                <td>
                                    BTS เพลินจิต
                                </td>
                            </tr>
                            <tr>
                                <td>4</td>
                                <td>
                                    <a href="#">พื้นที่ว่าง 4</a>
                                </td>
                                <td>
                                    BTS เพลินจิต
                                </td>
                            </tr>
                            <tr>
                                <td>5</td>
                                <td>
                                    <a href="#">พื้นที่ว่าง 5</a>
                                </td>
                                <td>
                                    BTS เพลินจิต
                                </td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </div>
            <!--Pagination-->
            <div class="text-center">
                <ul class="pagination">
                    <li><a href="#">«</a></li>
                    <li><a href="#">1</a></li>
                    <li><a href="#">2</a></li>
                    <li class="active"><a href="#">3</a></li>
                    <li><a href="#">4</a></li>
                    <li><a href="#">5</a></li>
                    <li><a href="#">6</a></li>
                    <li><a href="#">7</a></li>
                    <li><a href="#">8</a></li>
                    <li><a href="#">»</a></li>
                </ul>
            </div>
            <!--End Pagination-->
        </div>
        <div class="col-md-6 col-sm-6">
            <div class="headline"><h2>รายการสื่อที่รอการตรวจสอบ</h2></div>
            <div class="table-search-v1 panel panel-dark">
                <div class="table-responsive">
                    <table class="table table-bordered table-striped">
                        <thead>
                            <tr style="background-color: rgba(230, 126, 34, 0.8);">
                                <th style="font-weight: normal; width: 80px;">ลำดับที่</th>
                                <th style="font-weight: normal">ชื่อสื่อ</th>
                                <th style="font-weight: normal">ชื่อลูกค้า</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td>1</td>
                                <td>
                                    <a href="#">สื่อ 1</a>
                                </td>
                                <td>
                                    ลูกค้า 1
                                </td>
                            </tr>
                            <tr>
                                <td>2</td>
                                <td>
                                    <a href="#">สื่อ 2</a>
                                </td>
                                <td>
                                    ลูกค้า 1
                                </td>
                            </tr>
                            <tr>
                                <td>3</td>
                                <td>
                                    <a href="#">สื่อ 3</a>
                                </td>
                                <td>
                                    ลูกค้า 3
                                </td>
                            </tr>
                            <tr>
                                <td>4</td>
                                <td>
                                    <a href="#">สื่อ 4</a>
                                </td>
                                <td>
                                    ลูกค้า 2
                                </td>
                            </tr>
                            <tr>
                                <td>5</td>
                                <td>
                                    <a href="#">สื่อ 5</a>
                                </td>
                                <td>
                                    ลูกค้า 3
                                </td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </div>
            <!--Pagination-->
            <div class="text-center">
                <ul class="pagination">
                    <li><a href="#">«</a></li>
                    <li class="active"><a href="#">1</a></li>
                    <li><a href="#">2</a></li>
                    <li><a href="#">3</a></li>
                    <li><a href="#">4</a></li>
                    <li><a href="#">5</a></li>
                    <li><a href="#">6</a></li>
                    <li><a href="#">7</a></li>
                    <li><a href="#">8</a></li>
                    <li><a href="#">»</a></li>
                </ul>
            </div>
            <!--End Pagination-->
        </div>
    </div>
</div>

@section Scripts {
    <script type="text/javascript" src="@Url.Content("~/assets/plugins/jquery.parallax.js")"></script>
    <script type="text/javascript" src="@Url.Content("~/assets/plugins/counter/waypoints.min.js")"></script>
    <script type="text/javascript" src="@Url.Content("~/assets/plugins/counter/jquery.counterup.min.js")"></script>
    <!--[if lte IE 8]><script language="javascript" type="text/javascript" src="@Url.Content("~/assets/js_custom/flot/excanvas.js")"></script><![endif]-->
    <script src="@Url.Content("~/assets/js_custom/flot/jquery.flot.min.js")"></script>
    <script src="@Url.Content("~/assets/js_custom/flot/jquery.flot.axislabels.js")"></script>
    <script src="@Url.Content("~/assets/js_custom/flot/jquery.flot.resize.min.js")"></script>
    <script src="@Url.Content("~/assets/js_custom/flot/jquery.flot.pie.min.js")"></script>

    <script type="text/javascript">
        jQuery(document).ready(function () {
            App.init();
            App.initCounter();
            App.initParallaxBg();

            drawCustomerBoard();
            drawMediaType();
            drawUserRegistered();

            $(window).resize(function () {
                drawCustomerBoard();
                drawMediaType();
                drawUserRegistered();
            });
        });

        function drawCustomerBoard() {
            var barOptions = {
                series: {
                    bars: {
                        show: true,
                        barWidth: 0.6,
                        fill: true,
                        fillColor: {
                            colors: [{
                                opacity: 0.8
                            }, {
                                opacity: 0.8
                            }]
                        },
                        align: "center"
                    },
                    valueLabels: {
                        show: true,
                        showAsHtml: true,
                        align: "center"
                    }
                },
                grid: {
                    hoverable: true,
                    clickable: true
                },
                xaxis: {
                    tickDecimals: 0,
                    ticks: [
					    [1, "ลูกค้า 1"], [2, "ลูกค้า 2"], [3, "ลูกค้า 3"], [4, "ลูกค้า 4"], [5, "ลูกค้า 5"]
                    ]
                },
                //colors: ["#1ab394"],
                grid: {
                    color: "#999999",
                    hoverable: true,
                    clickable: true,
                    tickColor: "#D4D4D4",
                    borderWidth: 0
                },
                legend: {
                    show: false
                },
                tooltip: true,
                tooltipOpts: {
                    content: "x: %x, y: %y"
                },
                axisLabels: {
                    show: true
                },
                xaxes: [{
                    axisLabel: 'ชื่อลูกค้า'
                }],
                yaxes: [{
                    position: 'left',
                    axisLabel: 'จำนวนป้าย'
                }]
            };
            var barData = {
                label: "bar",
                data: [
                    [1, 34],
                    [2, 34],
                    [3, 32],
                    [4, 25],
                    [5, 19]
                ]
            };
            var p = $.plot($("#flot-bar-chart"), [barData], barOptions);
            //add label
            $.each(p.getData()[0].data, function (i, el) {
                var o = p.pointOffset({ x: el[0], y: el[1] });
                $('<div class="data-point-label">' + el[1] + '</div>').css({
                    position: 'absolute',
                    left: o.left - 10,
                    top: o.top - 30,
                    display: 'none'
                }).appendTo(p.getPlaceholder()).fadeIn('slow');
            });
        }

        function drawMediaType() {
            var data = [
                {
                    label: "Media",
                    data: 21
                }, {
                    label: "Vinyl",
                    data: 3
                }
            ];

            var plotObj = $.plot($("#flot-pie-chart"), data, {
                series: {
                    pie: {
                        show: true,
                        radius: 1,
                        label: {
                            show: true,
                            radius: 3 / 4,
                            formatter: labelFormatter,
                            background: {
                                opacity: 0.5
                            }
                        }
                    },
                    valueLabels: {
                        show: true,
                        showAsHtml: true,
                        align: "center"
                    }
                },
                grid: {
                    hoverable: true
                },
                tooltip: true,
                tooltipOpts: {
                    content: "%p.0%, %s", // show percentages, rounding to 2 decimal places
                    shifts: {
                        x: 20,
                        y: 0
                    },
                    defaultTheme: false
                },
                legend: {
                    show: false
                }
            });
        }

        function drawUserRegistered() {
            var barOptions = {
                series: {
                    lines: {
                        show: true,
                        lineWidth: 2,
                        fill: true,
                        fillColor: {
                            colors: [{
                                opacity: 0.0
                            }, {
                                opacity: 0.0
                            }]
                        }
                    }
                },
                xaxis: {
                    tickDecimals: 0,
                    ticks: [
					    [1, "พ.ย. 2557"], [2, "ธ.ค. 2557"], [3, "ม.ค. 2558"], [4, "ก.พ. 2558"], [5, "มี.ค. 2558"], [6, "เม.ย. 2558"]
                    ]
                },
                //colors: ["#1ab394"],
                grid: {
                    color: "#999999",
                    hoverable: true,
                    clickable: true,
                    tickColor: "#D4D4D4",
                    borderWidth: 0
                },
                legend: {
                    show: false
                },
                tooltip: true,
                tooltipOpts: {
                    content: "x: %x, y: %y"
                },
                axisLabels: {
                    show: true
                },
                xaxes: [{
                    axisLabel: 'ช่วงเวลา'
                }],
                yaxes: [{
                    position: 'left',
                    axisLabel: 'จำนวนผู้ลงทะเบียน'
                }]
            };
            var barData = {
                label: "bar",
                data: [
                    [1, 34],
                    [2, 25],
                    [3, 19],
                    [4, 34],
                    [5, 32],
                    [6, 44]
                ]
            };
            $.plot($("#flot-line-chart"), [barData], barOptions);

            $("<div id='tooltip' class='flot-tooltip'></div>").css({
                position: "absolute",
                display: "none",
                border: "1px solid #fdd",
                padding: "2px",
                "background-color": "#fee",
                opacity: 0.80
            }).appendTo("body");

            $("#flot-line-chart").bind("plothover", function (event, pos, item) {
                console.log("plothover");
                if (item) {
                    var x = item.datapoint[0].toFixed(2),
                        y = item.datapoint[1].toFixed(2);

                    $("#tooltip").html(parseInt(y.toString()) + " คน")
                        .css({ top: item.pageY + 5, left: item.pageX + 5 })
                        .fadeIn(200);
                } else {
                    $("#tooltip").hide();
                }
            });
        }

        function labelFormatter(label, series) {
            return "<div style='font-size:18px; text-align:center; padding:2px; color:#333;'>" + label + "<br/>" + Math.round(series.percent) + "%</div>";
        }
    </script>
}
